<?php

use Illuminate\Support\Facades\Route;

Route::get('/', function () {
    return view('welcome');
});
// API Routes (temporário - depois movemos para api.php)
Route::prefix('api')->group(function () {
    // Health check
    Route::get('/health', function () {
        return response()->json([
            'status' => 'online',
            'service' => 'CoxinhaDelivery API',
            'version' => '1.0.0',
            'timestamp' => now()->toDateTimeString(),
            'environment' => app()->environment()
        ]);
    });
    
    // Products
    Route::get('/produtos', [\App\Http\Controllers\API\ProductController::class, 'index']);
    Route::get('/produtos/{id}', [\App\Http\Controllers\API\ProductController::class, 'show']);
    Route::get('/produtos/categorias', [\App\Http\Controllers\API\ProductController::class, 'categorias']);
    
    // Orders (clientes)  ← MOVER DENTRO DO GRUPO
    Route::post('/pedidos', [\App\Http\Controllers\API\OrderController::class, 'store']);
    Route::get('/pedidos/{codigo}', [\App\Http\Controllers\API\OrderController::class, 'show']);
    
    // Admin Orders (sem auth por enquanto)
    Route::get('/admin/pedidos', [\App\Http\Controllers\API\OrderController::class, 'index']);
    Route::put('/admin/pedidos/{id}/status', [\App\Http\Controllers\API\OrderController::class, 'updateStatus']);
    Route::get('/admin/pedidos/{id}', [\App\Http\Controllers\API\OrderController::class, 'adminShow']);
}); // ← Este fecha o grupo prefix('api')